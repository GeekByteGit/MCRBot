# MCRBot
**This bot has both a DCA feature (Dollar Cost Averaging) and will also keep your portfolio balanced automatically. The coins in your portfolio can be either chosen manually, or automatically by market cap ranking.**

---

## Requirements
The bot is running on NodeJS and it is presumed you will want to run it with a process manager such as PM2, to automatically restart it in case of failure and keep it running when you detach from the terminal session. The following steps will make sure you have all prerequisits installed and the repository downloaded.
##### Install NodeJS
Both the bot itself as well as the process manager will be run on NodeJS, which can be installed with `apt-get install nodejs`.
##### Install NPM
The Node Package Manager (NPM) is required to install package requirements for the bot and can be installed with `apt-get install npm`, if it has no been installed already.
##### Install PM2
PM2 is a process manager that will keep your bot running as well as restart it after failure. It can be installed with `npm install pm2 -g`.
##### Install Logrotate
The log file generated by the process manager will grow indefinitely. To prevent that, we are going to install logrotate, which will neatly split up our log file into several log files (one for each day) and delete files that are older than 30 days. It can be installed with `pm2 install pm2-logrotate`.
##### Install Git
Git will be used to clone the repository and keep the bot up to date. You can install it with `apt-get install git`.

---

## Setup
We now need to download and compile the source code and install the package requirements. The following steps will lead you through that process.
##### Clone MCRBot
Navigate to the folder you want MCRBot to be located in. Then run `git clone https://github.com/Thornsnake/MCRBot.git` to clone the repository.
##### Compile the Bot
Navigate into the bot folder and run `sh install.sh` to download all package requirements and compile the source code.

---

## Configuration
To configure the bot, run `cp _config.ts config.ts` to make a copy of the configuration template. You can now open the `config.ts` file with your favorite file editor. In this guide it is presumed you are using `vim`. If you do not have Vim installed, you can do so with `apt-get install vim.`
Open the configuration file with `vim config.ts` and you should see the following list of configuration options.

| Option               | Type     | Description
| -------------------- | -------- | ---
| APIKEY               | string   | The API key from the crypto.com exchange.
| SECRET               | string   | The secret key from the crypto.com exchange.
| SCHEDULE > INVESTING | string   | The interval for the DCA investing in cron format. Defaults to `every day, 5 minutes after midnight`.
| SCHEDULE > REBALANCE | string   | The interval for the portfolio rebalancing in cron format. Defaults to `every 15 minutes`.
| QUOTE                | string   | The quote currency used on the exchange. Can be `USDT`, `USDC`, `BTC` or `CRO`.
| INVESTMENT           | number   | The amount of quote currency invested during each investment interval. This will be split over all coins.
| TOP                  | number   | The top X coins by market cap to invest into and rebalance. Set this to `0` if you want to manually manage all coins.
| INCLUDE              | string[] | A list of coins to always invest in and rebalance, even if they are not within the market cap.
| EXCLUDE              | string[] | A list of coins to never invest in or rebalance, even if they are within the market cap.
| THRESHOLD            | number   | The threshold in percent that a coin's value can deviate from the average before being rebalanced.
| WEIGHT               | object   | The weight in percent a coin should have in the portfolio. The remaining weight will be split over all other coins.
| DRY                  | boolean  | Dry run. Don't execute the orders on the exchange. This is a debug feature.

If you need more detailed explanations what each option does, read the comments in the configuration file. They should explain things well enough.